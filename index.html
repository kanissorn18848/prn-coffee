<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PRN Coffee Order Form</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans', sans-serif; padding: 20px; background: #c6dbef; color: #21224a; }
        .order-card { background: white; padding: 25px; border-radius: 15px; box-shadow: 0 10px 25px rgba(0,0,0,0.05); max-width: 450px; margin: auto; }
        .input-group { margin-bottom: 20px; }
        label { display: block; font-weight: 600; margin-bottom: 8px; }
        select, input[type="text"] { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px; box-sizing: border-box; font-size: 16px; }
        .radio-group { display: flex; gap: 20px; background: #f9f9f9; padding: 10px; border-radius: 8px; }
        .subheading {
            text-align: center;
            font-size: 0.9em; /* Makes it smaller than the title */
            color: #3c4093;    /* A softer blue color */
            margin-top: -15px; /* Pulls it closer to the main title */
            margin-bottom: 25px;
            font-weight: 400;
        }
        
        .summary-box { background: #3182bd; color: white; padding: 15px; border-radius: 10px; margin-bottom: 20px; }
        .summary-box h3 { margin-top: 0; font-size: 1.1em; border-bottom: 1px solid #ffffff55; padding-bottom: 5px; }
        .summary-item { display: flex; justify-content: space-between; font-size: 0.9em; margin: 5px 0; }
        
        button { width: 100%; background: #08519c; color: white; border: none; padding: 15px; border-radius: 8px; font-size: 16px; font-weight: bold; cursor: pointer; transition: 0.3s; }
        button:hover { background: #003468; }
        button:disabled { background: #ccc; cursor: not-allowed; }
        /* Style for the clear button to make it look different from the submit button */
        button[onclick="clearForm()"] {
            background: #dcdcdc;
            color: #333;
            font-size: 14px;
            padding: 10px;
            border: 1px solid #ccc;
        }
        
        button[onclick="clearForm()"]:hover {
            background: #c0c0c0;
        }
    </style>
</head>
<body>

<div class="order-card">
    <h2 style="text-align: center;">☕ PRN Coffee</h2>
    <p class="subheading">Freshly brewed coffee for your daily boost</p>

    <div class="input-group">
        <label>Customer Name</label>
        <input type="text" id="customer-name" placeholder="Enter your name" oninput="updateSummary()">
    </div>

    <div class="input-group">
        <label>Select Drink</label>
        <select id="menu-item" onchange="updateSummary()">
            <option value="Signature Latte" data-price="30">Signature Latte</option>
            <option value="Dark & Bold" data-price="35">Dark & Bold</option>
            <option value="Thai-Style" data-price="35">Thai-Style</option>
            <option value="Morning Black" data-price="20">Morning Black</option>
        </select>
    </div>

    <div class="input-group">
        <label>Type</label>
        <div class="radio-group">
            <label><input type="radio" name="temp" value="Hot" checked onchange="updateSummary()"> Hot (+0฿)</label>
            <label><input type="radio" name="temp" value="Cold" onchange="updateSummary()"> Cold (+5฿)</label>
        </div>
    </div>

    <div class="input-group">
        <label>Extra Shot?</label>
        <div class="radio-group">
            <label><input type="radio" name="extra" value="No" checked onchange="updateSummary()"> No</label>
            <label><input type="radio" name="extra" value="Yes" onchange="updateSummary()"> Yes (+5฿)</label>
        </div>
    </div>

    <div class="input-group">
        <label>Sweetness Level</label>
        <select id="sweetness" onchange="updateSummary()">
            <option value="100%">Normal Sweet (100%)</option>
            <option value="50%">Less Sweet (50%)</option>
            <option value="0%">No Sugar (0%)</option>
            <option value="125%">Extra Sweet (125%)</option>
        </select>
    </div>

    <div class="input-group">
        <label>Special Instructions</label>
        <input type="text" id="notes" placeholder="Serve at the class etc." oninput="updateSummary()">
    </div>

    <div class="input-group">
        <button type="button" onclick="clearForm()" style="background: #e0e0e0; color: #21224a; margin-bottom: 10px;">Clear Form</button>
    </div>

    <div class="summary-box">
        <h3>Order Summary</h3>
        <div class="summary-item"><span>Drink:</span> <span id="sum-drink">-</span></div>
        <div class="summary-item"><span>Options:</span> <span id="sum-options">-</span></div>
        <div class="summary-item" style="font-weight: bold; margin-top: 10px; border-top: 1px solid #ffffff55; padding-top: 5px;">
            <span>Total:</span> <span id="sum-total">0฿</span>
        </div>
    </div>

    <button onclick="submitOrder()" id="submit-btn">Place Order</button>
</div>

<script>
    function updateSummary() {
        const menu = document.getElementById('menu-item');
        const drinkName = menu.value;
        const basePrice = parseInt(menu.options[menu.selectedIndex].getAttribute('data-price'));
        
        const type = document.querySelector('input[name="temp"]:checked').value;
        const extra = document.querySelector('input[name="extra"]:checked').value;
        const sweetness = document.getElementById('sweetness').value;
        
        // Price Logic
        let finalPrice = basePrice;
        if (type === "Cold") finalPrice += 5;
        if (extra === "Yes") finalPrice += 5;

        // Update UI
        document.getElementById('sum-drink').innerText = drinkName;
        document.getElementById('sum-options').innerText = `${type} | Sweetness: ${sweetness} | Extra Shot: ${extra}`;
        document.getElementById('sum-total').innerText = `${finalPrice} baht`;
        
        return { drinkName, type, extra, finalPrice };
    }

    // Initialize summary on load
    updateSummary();
    function clearForm() {
        document.getElementById('customer-name').value = '';
        document.getElementById('menu-item').selectedIndex = 0;
        document.querySelector('input[name="temp"][value="Hot"]').checked = true;
        document.querySelector('input[name="extra"][value="No"]').checked = true;
        document.getElementById('sweetness').selectedIndex = 0;
        document.getElementById('notes').value = '';
        
        updateSummary();
    }
    function submitOrder() {
        const scriptURL = 'https://script.google.com/macros/s/AKfycbyNDUe2QtuBQV54hjXsUsf_D28vvosTd86XGtmAPiW84B_OjegvWEOv7t1F7TaENy0T9g/exec'; // REPLACED WITH YOUR URL
        const name = document.getElementById('customer-name').value;
        const summary = updateSummary();

        if (!name) {
            alert("Please enter your name.");
            return;
        }

        const data = {
            customer: name,
            menuItem: summary.drinkName,
            type: summary.type,
            extraShot: summary.extra,
            sweetness: document.getElementById('sweetness').value, 
            notes: document.getElementById('notes').value,         
            total: summary.finalPrice + " baht"
        };

        const btn = document.getElementById('submit-btn');
        btn.innerText = "Sending...";
        btn.disabled = true;

        fetch(scriptURL, {
            method: 'POST',
            mode: 'no-cors',
            body: JSON.stringify(data)
        }).then(() => {
            alert("Order sent! Thank you, " + name);
            window.location.reload();
        }).catch(err => {
            alert("Error sending order. Please check your internet.");
            btn.disabled = false;
            btn.innerText = "Place Order";
        });
    }
</script>
</body>
</html>
